var Project=Backbone.Model.extend({idAttribute:"url",defaults:function(){return{}}}),Projects=Backbone.Collection.extend({model:Project,url:"json/projects.json"}),ProjectView=Backbone.View.extend({initialize:function(a){this.bus=a.bus},events:{"click img":"project_clicked"},project_clicked:function(a){router.navigate("projects/"+this.model.get("url"),{trigger:!0})},render:function(){var a=_.template($("#thumbnailTemplate").html()),b=a(this.model.toJSON());return this.$el.html(b),this}}),ProjectsView=Backbone.View.extend({initialize:function(a){this.bus=a.bus},render:function(){var a=this;this.collection.each(function(b){var c=new ProjectView({model:b,bus:a.bus});a.$el.find("hr").before(c.render().$el)})}}),HeaderNavView=Backbone.View.extend({initialize:function(a){this.bus=a.bus},events:{"click .nav-logo":"onHomeClick","click .nav-project":"onProjectsClick","click .nav-about":"onAboutClick","click .nav-contact":"onContactClick","click .menu-icon":"showDropMenu"},showDropMenu:function(){$(".menu-dropdown").toggleClass("showMenu")},onProjectsClick:function(a){a.preventDefault(),router.navigate("projects",{trigger:!0}),$(".menu-dropdown").toggleClass("showMenu")},onHomeClick:function(a){a.preventDefault(),router.navigate("home",{trigger:!0}),$(".menu-dropdown").toggleClass("showMenu")},onContactClick:function(a){a.preventDefault(),router.navigate("contact",{trigger:!0}),$(".menu-dropdown").toggleClass("showMenu")},onAboutClick:function(a){a.preventDefault(),router.navigate("about",{trigger:!0}),$(".menu-dropdown").toggleClass("showMenu")}}),projects=new Projects,eventBus=_.extend({},Backbone.Events),headerNavView=new HeaderNavView({el:".nav-container",bus:eventBus}),AppRouter=Backbone.Router.extend({initialize:function(a){this.bus=a.bus},routes:{"":"viewHome",home:"about",projects:"projects",about:"about",contact:"contact","*other":"defaultRoute"},viewHome:function(){},projects:function(){this.scrollTo($(".thumbnail-container"))},about:function(){this.scrollTo($(".about-container"))},contact:function(){this.scrollTo($(".contact-container"))},scrollTo:function(a){var b=$(window).width()<800?$(".about-container").offset().top:0;$("html, body").stop().animate({scrollTop:a.offset().top-b},1e3)},defaultRoute:function(){}}),router;projects.fetch({success:function(){var a=new ProjectsView({el:"#thumbnails",collection:projects,bus:eventBus});a.render(),router=new AppRouter({bus:eventBus}),Backbone.history.start()}});